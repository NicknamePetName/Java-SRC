# 迪米特法则
· **迪米特法则，又称为最少知识原则（Law of Demeter 或 LoD），是一种面向对象设计原则，旨在降低对象之间的耦合性，从而提高代码的可维护性和可扩展性。迪米特法则的基本思想是，一个对象应该对其他对象有尽可能少的了解，它应该只与其直接的朋友通信，而不与陌生的对象通信。** 

· **具体而言，迪米特法则包含以下几个方面：**  

· **每个对象都应该尽可能少地了解其他对象的存在，也就是说，每个对象应该尽可能地封装自己的内部实现细节，以减少对其他对象的依赖。**  

~ **对于一个对象来说，其直接的朋友包括以下几种类型：**   

1· **与该对象直接交互的对象；**  
2· **由该对象创建或销毁的对象；**  
3· **作为该对象的实例变量的对象。**  

· **对于一个对象来说，它应该避免与非直接的朋友通信，也就是说，它应该尽可能地避免与其他对象的朋友（即非直接的朋友）发生直接的交互。**  

· **遵循迪米特法则可以帮助我们设计出更加松耦合、易于维护和扩展的面向对象系统。**  


### *假设有一个商店系统，其中包含商品、订单和用户三个类。每个订单包含多个商品，每个用户可以创建多个订单。现在要实现一个获取某个用户最近订单中所有商品的功能。我们可以运用迪米特法则来设计实现。首先，根据迪米特法则的要求，我们可以将订单和用户视为商品的直接朋友，因为订单和用户都包含商品。但是，商品和用户之间没有直接的联系，所以商品应该避免直接与用户通信。*  

· `UML图`  

```
             +----------+     1     +---------+
             |   User   |<----------|  Order  |
             +----------+   *     1 +---------+
             |   name   |            |  items  |
             |   id     |            |  ...    |
             |   ...    |            +---------+
             +----------+
                   |
                   | 1     +------------+
                   +-------|  Product   |
                   *      1+------------+
                             |  name      |
                             |  id        |
                             |  price     |
                             |  ...       |
                             +------------+
```  

```
    其中，User类和Order类之间是一对多关系，表示一个用户可以创建多个订单；Order类和Product类之间也是一对多关系，表示一个订单中可以包含多个商品。而Product类与User类之间没有直接关系。
```



```
    结束

    在上述代码中，User类实现了获取最近订单中的所有商品的功能。它首先通过getRecentOrders()方法获取最近订单，然后遍历每个订单，获取其中的商品。注意到，在这个过程中，商品类Product没有直接和用户类User通信，而是通过订单类Order间接地和用户类User通信。这样可以避免不必要的耦合性。
```